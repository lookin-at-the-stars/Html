<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/cadastro.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
 <div class="box-principal">
    <div class="box-image">
        <img src="../imagem/icons8-blockchain-500.png">
    </div>
    <div class="wrapper">
        <!-- Link de Login formatado -->
        <div class="login-wrapper">
            <a href="v_login.html" class="login-link">Já tem uma conta? Faça login aqui.</a>
        </div>

        <!-- Formulário de Cadastro -->
        <form id="registerForm" action="../controller/c_cadastro.php" method="POST">
            <h1>Crie sua Conta</h1>    

            <div class="input-box">
                <input type="text" required placeholder="Nome Completo:" maxlength="100" name="nome">
                <i class='bx bxs-user'></i>
            </div>

            <div class="input-box">
                <input type="email" required placeholder="Email:" name="email">
                <i class='bx bxs-envelope'></i>
            </div>

            <div class="input-box">
                <input type="text" required placeholder="Número de Telefone:" maxlength="15" name="telefone">
                <i class='bx bxs-phone'></i>
            </div>

            <div class="input-row">
                <div class="input-box w50">
                    <input id="password-input" type="password" required placeholder="Senha:" name="senha">
                    <i class='bx bxs-lock' id="toggle-password"></i>
                </div>
                <div class="input-box w50">
                    <input id="confirm-password-input" type="password" required placeholder="Confirmar Senha:">
                    <i class='bx bxs-lock'></i>
                </div>
            </div>
                <input class="btn" type="submit" value="Cadastrar Conta">
        </form>
        <div class="errormessage" id="errorMessage" style="color: red; background-color: #666666; text-align: center; padding: 0.5rem; margin: 1rem 0; font-size: 1rem; border: 2px solid rgb(107, 106, 52); border-radius: 5px; opacity: 1;"></div> 
        <script>
 $(document).ready(function() {
    $('#registerForm').submit(function(event) {
        event.preventDefault();

        const password = $('#password-input').val();
        const confirmPassword = $('#confirm-password-input').val();

        if (password !== confirmPassword) {
            $('#errorMessage').text('As senhas não coincidem!').show();
            return false;
        } else {
            $.ajax({
                type: 'POST',
                url: '../controller/c_cadastro.php',
                data: $(this).serialize(),
                success: function(response) {
                    if (response.status === 'success') {
                        window.location.href = '../view/v_home_page.html'; // Redireciona se sucesso
                    } else {
                        $('#errorMessage').text(response.message).show(); // Exibe mensagem de erro
                    }
                },
                error: function() {
                    $('#errorMessage').text('Erro ao processar o cadastro.').show();
                }
            });
        }
    });
});
        </script>
        
        <div class="register-link">
            <p class="login-prompt">Faça login e comece a explorar:</p>
            <div class="social-login">
                <a href="#" class="social-btn google">
                    <i class='bx bxl-google'></i> Google
                </a>
                <a href="#" class="social-btn facebook">
                    <i class='bx bxl-facebook'></i> Facebook
                </a>
            </div>
        </div>
    </div>
 </div>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="../js/senha_visivel.js"></script>
</body>
</html>
